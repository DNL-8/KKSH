# ========== App ==========
ENV=dev
TZ=America/Sao_Paulo
JWT_SECRET=change-me-in-prod
PERSIST_REFRESH_TOKENS=false

# ========== Frontend serving (same-origin) ==========
# true in production container, false when developing with Vite separately.
SERVE_FRONTEND=false
FRONTEND_DIST_PATH=dist/public

# ========== Database ==========
# Local dev example: sqlite
DATABASE_URL=sqlite:///./study_leveling.db
AUTO_CREATE_DB=true
SEED_DEV_DATA=true

# ========== CORS ==========
# Comma-separated list of allowed origins.
# Explicit list only. No localhost fallback is applied by the API.
# Leave empty for same-origin deployments.
# Dev with Vite example: CORS_ORIGINS=http://127.0.0.1:3000
CORS_ORIGINS=

# ========== Cookies ==========
COOKIE_DOMAIN=
COOKIE_SAMESITE=lax
COOKIE_SECURE=
COOKIE_PATH=/

# ========== Observability ==========
METRICS_ENABLED=true
METRICS_TOKEN=
SENTRY_DSN=
AUDIT_ENABLED=true

# ========== AI ==========
GEMINI_API_KEY=
GEMINI_MODEL=gemini-2.5-flash-preview-09-2025
GEMINI_MODEL_CHAIN=
AI_GUEST_DAILY_MAX=10
AI_GUEST_DAILY_WINDOW_SEC=86400
AI_USER_DAILY_MAX=120
AI_USER_DAILY_WINDOW_SEC=86400
AI_HISTORY_MAX_MESSAGES=200
AI_RATE_LIMIT_MAX=30
AI_RATE_LIMIT_WINDOW_SEC=60
AI_MISSION_REGEN_COOLDOWN_SEC=3600

# ========== Rate limiting ==========
REDIS_URL=
TRUSTED_PROXY_IPS=

# ========== Webhook secret encryption ==========
WEBHOOK_SECRET_ENC_KEY=
WEBHOOK_SECRET_KEY_ID=v1
WEBHOOK_OUTBOX_ENABLED=false
WEBHOOK_OUTBOX_SEND_ENABLED=false
WEBHOOK_WORKER_BATCH_SIZE=50
WEBHOOK_WORKER_POLL_INTERVAL_MS=1000
WEBHOOK_WORKER_LOCK_TTL_SEC=60
WEBHOOK_WORKER_MAX_ATTEMPTS=8
WEBHOOK_WORKER_BACKOFF_BASE_SEC=5
WEBHOOK_WORKER_BACKOFF_MAX_SEC=900
WEBHOOK_WORKER_BACKOFF_JITTER_SEC=2
WEBHOOK_DELIVERY_TIMEOUT_SEC=3.0
