# Backend settings
ENV=dev
APP_NAME=study-leveling

# Security
JWT_SECRET=change-me-in-prod
ACCESS_TOKEN_EXPIRE_MIN=30
REFRESH_TOKEN_EXPIRE_DAYS=30
# Required in production/staging for secure refresh-token rotation/revocation
PERSIST_REFRESH_TOKENS=false

# Database
DATABASE_URL=postgresql+psycopg2://postgres:postgres@localhost:5432/study_leveling

# CORS
CORS_ORIGINS=http://localhost:3000

# Cookies (prod: set COOKIE_SECURE=true + COOKIE_DOMAIN if needed)
COOKIE_DOMAIN=
COOKIE_SECURE=
COOKIE_SAMESITE=lax

# CSRF (double-submit cookie)
CSRF_ENABLED=true
CSRF_COOKIE_NAME=csrf_token
CSRF_HEADER_NAME=X-CSRF-Token

# Admin emails (comma-separated). Admins can manage drills.
ADMIN_EMAILS=

# Timezone
TZ=America/Sao_Paulo

# DB bootstrapping (dev/tests only)
AUTO_CREATE_DB=true
SEED_DEV_DATA=false

# Logging
LOG_LEVEL=INFO

# Rate limiting
RATE_LIMIT_DEFAULT_MAX=120
RATE_LIMIT_DEFAULT_WINDOW_SEC=60
RATE_LIMIT_AUTH_MAX=10
RATE_LIMIT_AUTH_WINDOW_SEC=60

# Redis (recommended in prod for rate limiting)
REDIS_URL=
TRUSTED_PROXY_IPS=

# Observability
METRICS_ENABLED=true
METRICS_TOKEN=
SENTRY_DSN=
SENTRY_TRACES_SAMPLE_RATE=0.0
AUDIT_ENABLED=true

# AI provider (server-side only)
GEMINI_API_KEY=
GEMINI_MODEL=gemini-2.5-flash-preview-09-2025
GEMINI_MODEL_CHAIN=
AI_GUEST_DAILY_MAX=10
AI_GUEST_DAILY_WINDOW_SEC=86400
AI_HISTORY_MAX_MESSAGES=200
AI_RATE_LIMIT_MAX=30
AI_RATE_LIMIT_WINDOW_SEC=60
AI_HUNTER_RETRY_MAX=2
AI_HUNTER_RETRY_BASE_MS=1200
AI_HUNTER_RETRY_MAX_MS=8000
AI_HUNTER_RETRY_JITTER_MS=250
AI_HUNTER_QUOTA_RETRY_MAX_SEC=8

# Frontend serving (single-origin)
SERVE_FRONTEND=false
FRONTEND_DIST_PATH=../dist/public
